# ìë§‰ ì¶”ê°€ & ì¬ìƒ ì†ë„ ì¡°ì ˆ ì„¤ê³„ ì¼ì§€ (v1.2)
> FFmpeg ë¹„ë””ì˜¤ í•„í„°ë¥¼ í™œìš©í•œ ìë§‰ burn-in ë° playback speed ì¡°ì ˆ

## 1. ë¬¸ì œ ì •ì˜ & ìš”êµ¬ì‚¬í•­

### 1.1 í•µì‹¬ ëª©í‘œ

**Phase 1ì˜ ê³ ê¸‰ í¸ì§‘ ê¸°ëŠ¥**:
- v1.1 Trim/Splitì— ì´ì–´ **ìë§‰ ì¶”ê°€** ë° **ì†ë„ ì¡°ì ˆ** êµ¬í˜„
- **Subtitle burn-in**: SRT í¬ë§· ìë§‰ì„ ë¹„ë””ì˜¤ì— ì˜êµ¬ì ìœ¼ë¡œ ì‚½ì…
- **Playback speed**: 0.5x ~ 2x ë°°ì† ì¡°ì ˆ
- **ë³µí•© í•„í„°**: ìë§‰ + ì†ë„ë¥¼ ë™ì‹œì— ì ìš© ê°€ëŠ¥

**Vrew í•µì‹¬ ê¸°ëŠ¥ ë§¤ì¹­**:
- Vrewì˜ AI ìë§‰ ìƒì„± â†’ ìë§‰ burn-in ê¸°ìˆ  ê¸°ë°˜
- ìŒì„± ì†ë„ ì¡°ì ˆ â†’ atempo í•„í„° ì´í•´
- Voyager X ìš”êµ¬ì‚¬í•­: "ë™ì˜ìƒ ê´€ë ¨ ê¸°ìˆ ì— ëŒ€í•´ ê´€ì‹¬ì´ ë§ìŒ" âœ…

### 1.2 ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

#### 1.2.1 Subtitle ì¶”ê°€
1. **SRT í¬ë§· ì§€ì›**
   - í‘œì¤€ SubRip (.srt) íŒŒì¼ ìƒì„±
   - íƒ€ì„ì½”ë“œ: `HH:MM:SS,mmm --> HH:MM:SS,mmm`
   - UTF-8 ì¸ì½”ë”© (ë‹¤êµ­ì–´ ì§€ì›)

2. **ìë§‰ ë°ì´í„° êµ¬ì¡°**
   ```typescript
   interface Subtitle {
     text: string;        // "ì•ˆë…•í•˜ì„¸ìš”"
     startTime: number;   // 5.5 (seconds)
     duration: number;    // 2.0 (seconds)
   }
   ```

3. **Burn-in ë Œë”ë§**
   - FFmpeg subtitles í•„í„° ì‚¬ìš©
   - í•˜ë‹¨ ì¤‘ì•™ ì •ë ¬ (Alignment=2)
   - ì—¬ë°± ì„¤ì • (MarginV=20px)
   - í°íŠ¸ í¬ê¸°: 24pt
   - ë°°ê²½: ë°˜íˆ¬ëª… ê²€ì • (ê°€ë…ì„±)

4. **ìë§‰ ìŠ¤íƒ€ì¼**
   ```
   force_style='Alignment=2,MarginV=20,FontSize=24,
                PrimaryColour=&H00FFFFFF,BackColour=&H80000000'
   ```

#### 1.2.2 Playback Speed ì¡°ì ˆ
1. **ì§€ì› ë²”ìœ„**
   - ìµœì†Œ: 0.5x (ì ˆë°˜ ì†ë„, ëŠë¦° ëª¨ì…˜)
   - ìµœëŒ€: 2.0x (2ë°° ì†ë„, ë¹ ë¥¸ ì¬ìƒ)
   - 1.0x: ì›ë³¸ ì†ë„

2. **ë¹„ë””ì˜¤ ì†ë„**
   - `setpts` í•„í„°: Presentation Timestamp ì¡°ì •
   - ê³µì‹: `setpts=${1 / speed}*PTS`
   - ì˜ˆ: 2x ì†ë„ â†’ `setpts=0.5*PTS`

3. **ì˜¤ë””ì˜¤ ì†ë„**
   - `atempo` í•„í„°: ìŒë†’ì´ ìœ ì§€í•˜ë©° ì†ë„ ì¡°ì ˆ
   - ì œì•½: 0.5 ~ 2.0 ë²”ìœ„
   - 2.0 ì´ˆê³¼: í•„í„° ì²´ì´ë‹ í•„ìš”

4. **ë™ê¸°í™”**
   - ë¹„ë””ì˜¤ì™€ ì˜¤ë””ì˜¤ ë™ì¼í•œ ë°°ìœ¨ ì ìš©
   - duration ì¬ê³„ì‚°: `new_duration = original / speed`

#### 1.2.3 ë³µí•© ì²˜ë¦¬
1. **ìë§‰ + ì†ë„ ë™ì‹œ ì ìš©**
   - í•„í„° ìˆœì„œ: speed â†’ subtitle
   - ìë§‰ íƒ€ì´ë°ë„ ì†ë„ì— ë§ì¶° ì¡°ì •
   - ë‹¨ì¼ FFmpeg ëª…ë ¹ìœ¼ë¡œ ì²˜ë¦¬

2. **ì„ íƒì  ì ìš©**
   - ìë§‰ë§Œ ì¶”ê°€ (speed = 1.0)
   - ì†ë„ë§Œ ì¡°ì ˆ (subtitles = [])
   - ë‘˜ ë‹¤ ì ìš©
   - ì•„ë¬´ê²ƒë„ ì—†ìœ¼ë©´ ì—ëŸ¬

### 1.3 ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

#### 1.3.1 ì„±ëŠ¥
- **ì²˜ë¦¬ ì‹œê°„**: p99 < 60s for 100MB video (re-encoding í•„ìš”)
- **ë©”ëª¨ë¦¬**: < 200MB (ë¹„ë””ì˜¤ ë””ì½”ë”©/ì¸ì½”ë”©)
- **ì„ì‹œ íŒŒì¼**: SRT íŒŒì¼ ìƒì„± í›„ ìë™ ì •ë¦¬
- **ì§„í–‰ë¥ **: v1.3ì—ì„œ WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ í‘œì‹œ ì˜ˆì •

#### 1.3.2 í’ˆì§ˆ
- **ë¹„ë””ì˜¤ í’ˆì§ˆ**: CRF 23 (ê³ í’ˆì§ˆ)
- **ì¸ì½”ë”© ì†ë„**: preset fast (í’ˆì§ˆ vs. ì†ë„ ê· í˜•)
- **ìë§‰ ê°€ë…ì„±**: ì•ˆí‹°ì•¨ë¦¬ì–´ì‹±, ê·¸ë¦¼ì íš¨ê³¼
- **ì˜¤ë””ì˜¤ í’ˆì§ˆ**: ì›ë³¸ ìƒ˜í”Œë ˆì´íŠ¸ ìœ ì§€

#### 1.3.3 ì‚¬ìš©ì„±
- **SRT ìƒì„±**: ì‚¬ìš©ì ì…ë ¥ â†’ í‘œì¤€ SRT í¬ë§· ìë™ ë³€í™˜
- **íƒ€ì„ì½”ë“œ ì •í™•ì„±**: ë°€ë¦¬ì´ˆ ë‹¨ìœ„ (,mmm)
- **ë‹¤êµ­ì–´ ì§€ì›**: UTF-8, ì´ëª¨ì§€ ì§€ì›
- **ì—ëŸ¬ ë©”ì‹œì§€**: FFmpeg ì—ëŸ¬ â†’ ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€

---

## 2. ê¸°ìˆ ì  ë°°ê²½ & ì„¤ê³„ ë™ê¸°

### 2.1 ì™œ Burn-inì¸ê°€? (vs. Soft Subtitle)

**Soft Subtitle (ë³„ë„ íŠ¸ë™)**:
```
Video: [ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¼]
Audio: [ì˜¤ë””ì˜¤ ìŠ¤íŠ¸ë¦¼]
Subtitle: [ìë§‰ íŠ¸ë™]  â† í”Œë ˆì´ì–´ê°€ ë Œë”ë§

ì¥ì : ì–¸ì œë“  on/off ê°€ëŠ¥
ë‹¨ì : í”Œë ˆì´ì–´ ì˜ì¡´, ìŠ¤íƒ€ì¼ ì œí•œ
```

**Burn-in (Hard Subtitle)**:
```
Video: [ë¹„ë””ì˜¤ + ìë§‰ í•©ì„±]  â† í”½ì…€ì— ê·¸ë¦¼
Audio: [ì˜¤ë””ì˜¤ ìŠ¤íŠ¸ë¦¼]

ì¥ì : ëª¨ë“  í”Œë ˆì´ì–´ í˜¸í™˜, ìŠ¤íƒ€ì¼ ììœ 
ë‹¨ì : ì˜êµ¬ì , ìˆ˜ì • ë¶ˆê°€
```

**v1.2ì—ì„œ Burn-in ì„ íƒ ì´ìœ **:
1. **í˜¸í™˜ì„±**: ëª¨ë“  í”Œë ˆì´ì–´/í”Œë«í¼ ì§€ì›
2. **êµ¬í˜„ ë‹¨ìˆœ**: FFmpeg subtitles í•„í„° í•œ ì¤„
3. **Vrew ìœ ì‚¬**: Vrewë„ ìµœì¢… ì¶œë ¥ì€ burn-in

### 2.2 FFmpeg Subtitle Filter ë™ì‘ ì›ë¦¬

**ì²˜ë¦¬ íë¦„**:
```
1. SRT íŒŒì¼ ìƒì„±
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1                â”‚
   â”‚ 00:00:05,500 --> 00:00:07,500 â”‚
   â”‚ ì•ˆë…•í•˜ì„¸ìš”       â”‚
   â”‚                  â”‚
   â”‚ 2                â”‚
   â”‚ 00:00:10,000 --> 00:00:12,000 â”‚
   â”‚ native-video-editorì…ë‹ˆë‹¤  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. FFmpeg subtitles í•„í„° ì ìš©
   ffmpeg -i input.mp4 \
          -vf "subtitles=subs.srt:force_style='...'" \
          output.mp4

3. ê° í”„ë ˆì„ë§ˆë‹¤ ìë§‰ ë Œë”ë§
   Frame 165 (5.5s): "ì•ˆë…•í•˜ì„¸ìš”" ë Œë”ë§
   Frame 166 (5.533s): "ì•ˆë…•í•˜ì„¸ìš”" ë Œë”ë§
   ...
   Frame 300 (10.0s): "native-video-editorì…ë‹ˆë‹¤" ë Œë”ë§
```

**libass ë¼ì´ë¸ŒëŸ¬ë¦¬**:
- FFmpegì˜ subtitles í•„í„°ëŠ” ë‚´ë¶€ì ìœ¼ë¡œ libass ì‚¬ìš©
- ASS/SSA ê³ ê¸‰ ìë§‰ ìŠ¤íƒ€ì¼ ì§€ì›
- force_styleë¡œ ìŠ¤íƒ€ì¼ ì˜¤ë²„ë¼ì´ë“œ

### 2.3 Playback Speed í•„í„° ì´í•´

#### 2.3.1 ë¹„ë””ì˜¤ ì†ë„: setpts
**PTS (Presentation Timestamp)**:
```
ì›ë³¸ ë¹„ë””ì˜¤ (30fps):
Frame 0: PTS = 0ms
Frame 1: PTS = 33ms
Frame 2: PTS = 66ms
...

2ë°° ì†ë„ (setpts=0.5*PTS):
Frame 0: PTS = 0ms
Frame 1: PTS = 16.5ms   â† 33 * 0.5
Frame 2: PTS = 33ms     â† 66 * 0.5
...

ê²°ê³¼: ê°™ì€ ì‹œê°„ì— 2ë°° í”„ë ˆì„ ì¬ìƒ â†’ 2ë°° ë¹ ë¦„
```

**ê³µì‹**:
```
ì†ë„ ë°°ìœ¨ = speed
ìƒˆë¡œìš´ PTS = PTS * (1 / speed)

1.5ë°° ì†ë„: setpts=0.667*PTS
0.5ë°° ì†ë„: setpts=2.0*PTS
```

#### 2.3.2 ì˜¤ë””ì˜¤ ì†ë„: atempo
**atempo í•„í„°**:
- ìŒë†’ì´ ìœ ì§€í•˜ë©° ì†ë„ ì¡°ì ˆ (pitch-preserving)
- 0.5 ~ 2.0 ë²”ìœ„ ì œí•œ
- 2.0 ì´ˆê³¼: í•„í„° ì²´ì´ë‹

**2ë°° ì´ìƒ ì†ë„ ì˜ˆì‹œ**:
```bash
# 4ë°° ì†ë„ = atempo=2.0,atempo=2.0
-af "atempo=2.0,atempo=2.0"
```

**êµ¬í˜„ ì œì•½**:
- v1.2: 0.5 ~ 2.0 ë²”ìœ„ë§Œ ì§€ì›
- v1.3+: í•„í„° ì²´ì´ë‹ìœ¼ë¡œ í™•ì¥

### 2.4 ì™œ Re-encodingì´ í•„ìš”í•œê°€?

**Codec Copy (v1.1)**:
```
ì…ë ¥: [H.264 í”„ë ˆì„ë“¤]
       â†“ (ë³µì‚¬ë§Œ)
ì¶œë ¥: [ë™ì¼í•œ H.264 í”„ë ˆì„ë“¤]
ì‹œê°„: 2ì´ˆ
```

**Subtitle/Speed (v1.2)**:
```
ì…ë ¥: [H.264 í”„ë ˆì„ë“¤]
       â†“ (ë””ì½”ë”©)
     [Raw í”„ë ˆì„ë“¤]
       â†“ (í•„í„° ì ìš©: ìë§‰ ë Œë”ë§, PTS ì¡°ì •)
     [ìˆ˜ì •ëœ Raw í”„ë ˆì„ë“¤]
       â†“ (ì¸ì½”ë”©)
ì¶œë ¥: [ìƒˆë¡œìš´ H.264 í”„ë ˆì„ë“¤]
ì‹œê°„: 60ì´ˆ (30ë°° ëŠë¦¼)
í’ˆì§ˆ: CRF 23 ìœ ì§€
```

**íŠ¸ë ˆì´ë“œì˜¤í”„**:
- ì†ë„ â†“ (2ì´ˆ â†’ 60ì´ˆ)
- í’ˆì§ˆ ìœ ì§€ (CRF 23 = ê±°ì˜ ë¬´ì†ì‹¤)
- ê¸°ëŠ¥ â†‘ (ìë§‰, ì†ë„ ì¡°ì ˆ)

---

## 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 3.1 ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                native-video-editor v1.2 Architecture                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend                        Backend
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Subtitle Editor â”‚           â”‚  Express Server  â”‚
â”‚                  â”‚           â”‚                  â”‚
â”‚  [Text Input]    â”‚  POST     â”‚  edit.routes.ts  â”‚
â”‚  [Timeline]      â”‚  /process â”‚  â†“               â”‚
â”‚  [Speed Slider]  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  FFmpegService   â”‚
â”‚  0.5x ~ 2x       â”‚           â”‚  â†“               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  generateSRT()   â”‚
                               â”‚  â†“               â”‚
                               â”‚  fluent-ffmpeg   â”‚
                               â”‚  - subtitles     â”‚
                               â”‚  - setpts        â”‚
                               â”‚  - atempo        â”‚
                               â”‚  â†“               â”‚
                               â”‚  outputs/        â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸

```
ì‚¬ìš©ì ì…ë ¥
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. ìë§‰ ë°ì´í„° ìˆ˜ì‹                â”‚
â”‚     [{text, startTime, duration}]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. SRT íŒŒì¼ ìƒì„±                  â”‚
â”‚     temp-{timestamp}.srt           â”‚
â”‚                                    â”‚
â”‚     1                              â”‚
â”‚     00:00:05,500 --> 00:00:07,500  â”‚
â”‚     ì•ˆë…•í•˜ì„¸ìš”                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. FFmpeg í•„í„° êµ¬ì„±               â”‚
â”‚     videoFilters:                  â”‚
â”‚       - setpts=0.5*PTS  (2x ì†ë„)  â”‚
â”‚       - subtitles=temp.srt         â”‚
â”‚     audioFilters:                  â”‚
â”‚       - atempo=2.0                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Re-encoding ì‹¤í–‰               â”‚
â”‚     [ë””ì½”ë”©] â†’ [í•„í„°] â†’ [ì¸ì½”ë”©]   â”‚
â”‚     60ì´ˆ ì†Œìš” (100MB)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. ì„ì‹œ íŒŒì¼ ì •ë¦¬                 â”‚
â”‚     rm temp-{timestamp}.srt        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
ê²°ê³¼ ë°˜í™˜
```

### 3.3 SRT ìƒì„± íë¦„

```
JavaScript ìë§‰ ë°°ì—´
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ subtitles: [                        â”‚
â”‚   {                                 â”‚
â”‚     text: "ì•ˆë…•í•˜ì„¸ìš”",             â”‚
â”‚     startTime: 5.5,                 â”‚
â”‚     duration: 2.0                   â”‚
â”‚   },                                â”‚
â”‚   {                                 â”‚
â”‚     text: "native-video-editorì…ë‹ˆë‹¤",        â”‚
â”‚     startTime: 10.0,                â”‚
â”‚     duration: 2.0                   â”‚
â”‚   }                                 â”‚
â”‚ ]                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  formatSRTTime() í•¨ìˆ˜               â”‚
â”‚  5.5s â†’ "00:00:05,500"              â”‚
â”‚  7.5s â†’ "00:00:07,500"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SRT íŒŒì¼ (temp-123.srt)            â”‚
â”‚                                     â”‚
â”‚  1                                  â”‚
â”‚  00:00:05,500 --> 00:00:07,500      â”‚
â”‚  ì•ˆë…•í•˜ì„¸ìš”                         â”‚
â”‚                                     â”‚
â”‚  2                                  â”‚
â”‚  00:00:10,000 --> 00:00:12,000      â”‚
â”‚  native-video-editorì…ë‹ˆë‹¤                    â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
FFmpeg subtitles í•„í„° ì…ë ¥
```

### 3.4 í•„í„° ì²´ì¸ êµ¬ì¡°

```
Input Video
    â†“
[Video Stream]           [Audio Stream]
    â†“                         â†“
[setpts Filter]          [atempo Filter]
    â†“                         â†“
[subtitles Filter]            â”‚
    â†“                         â†“
[H.264 Encoder]          [AAC Encoder]
    â†“                         â†“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
         Output Video
```

---

## 4. ë°ì´í„° ëª¨ë¸ & API ì„¤ê³„

### 4.1 ë°ì´í„° íƒ€ì… ì •ì˜

#### 4.1.1 Subtitle ì¸í„°í˜ì´ìŠ¤
```typescript
// backend/src/services/ffmpeg.service.ts:20-24
export interface Subtitle {
  text: string;        // ìë§‰ í…ìŠ¤íŠ¸
  startTime: number;   // ì‹œì‘ ì‹œê°„ (ì´ˆ)
  duration: number;    // ì§€ì† ì‹œê°„ (ì´ˆ)
}
```

**ì˜ˆì‹œ ë°ì´í„°**:
```typescript
const subtitles: Subtitle[] = [
  {
    text: "ì•ˆë…•í•˜ì„¸ìš”, native-video-editorì…ë‹ˆë‹¤.",
    startTime: 5.5,
    duration: 3.0
  },
  {
    text: "ë¹„ë””ì˜¤ í¸ì§‘ì„ ì‹œì‘í•´ë³¼ê¹Œìš”?",
    startTime: 10.0,
    duration: 2.5
  }
];
```

#### 4.1.2 ProcessRequest
```typescript
export interface ProcessRequest {
  filename: string;          // ì…ë ¥ ë¹„ë””ì˜¤ íŒŒì¼ëª…
  subtitles?: Subtitle[];    // ìë§‰ ë°°ì—´ (ì„ íƒ)
  speed?: number;            // ì¬ìƒ ì†ë„ (0.5~2.0, ì„ íƒ)
}
```

### 4.2 API ì—”ë“œí¬ì¸íŠ¸

#### 4.2.1 POST /api/edit/process

**ìš”ì²­ (ìë§‰ë§Œ)**:
```http
POST /api/edit/process HTTP/1.1
Content-Type: application/json

{
  "filename": "video-123.mp4",
  "subtitles": [
    {
      "text": "ì•ˆë…•í•˜ì„¸ìš”",
      "startTime": 5.5,
      "duration": 2.0
    }
  ]
}
```

**ìš”ì²­ (ì†ë„ë§Œ)**:
```json
{
  "filename": "video-123.mp4",
  "speed": 1.5
}
```

**ìš”ì²­ (ìë§‰ + ì†ë„)**:
```json
{
  "filename": "video-123.mp4",
  "subtitles": [
    {
      "text": "ë¹ ë¥¸ ì¬ìƒ í…ŒìŠ¤íŠ¸",
      "startTime": 3.0,
      "duration": 2.0
    }
  ],
  "speed": 2.0
}
```

**ì‘ë‹µ (ì„±ê³µ)**:
```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "filename": "processed-1732348800000-abc.mp4",
  "path": "/app/uploads/outputs/processed-...",
  "url": "http://localhost:3001/videos/processed-1732348800000-abc.mp4",
  "size": 12582912
}
```

**ì‘ë‹µ (ì‹¤íŒ¨ - ì˜ëª»ëœ ì†ë„)**:
```http
HTTP/1.1 400 Bad Request

{
  "error": "Speed must be between 0.5 and 2.0"
}
```

**HTTP ìƒíƒœ ì½”ë“œ**:
- `200 OK`: ì²˜ë¦¬ ì„±ê³µ
- `400 Bad Request`: ì˜ëª»ëœ íŒŒë¼ë¯¸í„°
- `500 Internal Server Error`: FFmpeg ì—ëŸ¬

### 4.3 SRT íŒŒì¼ í¬ë§·

**í‘œì¤€ SRT êµ¬ì¡°**:
```srt
1
00:00:05,500 --> 00:00:07,500
ì²« ë²ˆì§¸ ìë§‰ í…ìŠ¤íŠ¸

2
00:00:10,000 --> 00:00:12,500
ë‘ ë²ˆì§¸ ìë§‰ í…ìŠ¤íŠ¸
ì—¬ëŸ¬ ì¤„ ì§€ì› ê°€ëŠ¥

3
00:00:15,000 --> 00:00:18,000
<i>ì´íƒ¤ë¦­</i>, <b>ë³¼ë“œ</b> íƒœê·¸ ì§€ì›
```

**íƒ€ì„ì½”ë“œ í¬ë§·**:
```
HH:MM:SS,mmm --> HH:MM:SS,mmm
â”‚  â”‚  â”‚  â”‚        â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ ë°€ë¦¬ì´ˆ (000-999)
â”‚  â”‚  â””â”€â”€â”€ ì´ˆ (00-59)
â”‚  â””â”€â”€â”€â”€â”€â”€ ë¶„ (00-59)
â””â”€â”€â”€â”€â”€â”€â”€â”€ ì‹œ (00-99)
```

---

## 5. ìƒì„¸ êµ¬í˜„

### 5.1 SRT ìƒì„± í•¨ìˆ˜

**íŒŒì¼**: `backend/src/services/ffmpeg.service.ts:318-331`

```typescript
/**
 * Generate SRT subtitle file content
 * @param subtitles - Array of subtitles
 * @returns SRT format string
 */
private generateSRT(subtitles: Subtitle[]): string {
  return subtitles
    .map((sub, index) => {
      const start = this.formatSRTTime(sub.startTime);
      const end = this.formatSRTTime(sub.startTime + sub.duration);

      return `${index + 1}\n${start} --> ${end}\n${sub.text}\n`;
    })
    .join('\n');
}
```

**ë™ì‘ ì˜ˆì‹œ**:
```typescript
const subs = [
  { text: "ì•ˆë…•", startTime: 5.5, duration: 2.0 }
];

generateSRT(subs)
// ì¶œë ¥:
// "1\n00:00:05,500 --> 00:00:07,500\nì•ˆë…•\n\n"
```

### 5.2 SRT íƒ€ì„ì½”ë“œ í¬ë§·íŒ…

**íŒŒì¼**: `backend/src/services/ffmpeg.service.ts:338-349`

```typescript
/**
 * Format time in SRT format (HH:MM:SS,mmm)
 * @param seconds - Time in seconds
 * @returns SRT formatted time string
 */
private formatSRTTime(seconds: number): string {
  const hours = Math.floor(seconds / 3600);
  const minutes = Math.floor((seconds % 3600) / 60);
  const secs = Math.floor(seconds % 60);
  const millis = Math.floor((seconds % 1) * 1000);

  return `${hours.toString().padStart(2, '0')}:${minutes
    .toString()
    .padStart(2, '0')}:${secs.toString().padStart(2, '0')},${millis
    .toString()
    .padStart(3, '0')}`;
}
```

**ë³€í™˜ ì˜ˆì‹œ**:
```typescript
formatSRTTime(5.5)   // "00:00:05,500"
formatSRTTime(65.25) // "00:01:05,250"
formatSRTTime(3661)  // "01:01:01,000"
```

### 5.3 ìë§‰ + ì†ë„ ì²˜ë¦¬ í•¨ìˆ˜

**íŒŒì¼**: `backend/src/services/ffmpeg.service.ts:236-315`

```typescript
/**
 * Add subtitles to video and/or change speed
 * @param inputPath - Path to input video file
 * @param subtitles - Array of subtitles to add
 * @param speed - Playback speed (0.5 to 2.0)
 * @returns Processing result with output file info
 */
async addSubtitlesAndSpeed(
  inputPath: string,
  subtitles: Subtitle[],
  speed?: number
): Promise<ProcessingResult> {
  const outputFilename = `processed-${Date.now()}-${Math.round(Math.random() * 1e9)}${path.extname(inputPath)}`;
  const outputPath = this.storageService.getFilePath(outputFilename);

  // 1. SRT íŒŒì¼ ìƒì„± (ìë§‰ì´ ìˆëŠ” ê²½ìš°)
  let subtitlePath: string | null = null;
  if (subtitles.length > 0) {
    subtitlePath = this.storageService.getFilePath(`temp-${Date.now()}.srt`);
    const srtContent = this.generateSRT(subtitles);
    await fs.writeFile(subtitlePath, srtContent, 'utf-8');
  }

  return new Promise((resolve, reject) => {
    let command = ffmpeg(inputPath);

    // 2. ë¹„ë””ì˜¤ í•„í„° êµ¬ì„±
    const filters: string[] = [];

    // ì†ë„ í•„í„°
    if (speed && speed !== 1.0) {
      filters.push(`setpts=${1 / speed}*PTS`);
    }

    // ìë§‰ í•„í„°
    if (subtitlePath) {
      const escapedPath = subtitlePath.replace(/\\/g, '/').replace(/:/g, '\\:');
      filters.push(`subtitles='${escapedPath}':force_style='Alignment=2,MarginV=20,FontSize=24'`);
    }

    // í•„í„° ì ìš©
    if (filters.length > 0) {
      command = command.videoFilters(filters);
    }

    // 3. ì˜¤ë””ì˜¤ ì†ë„ í•„í„°
    if (speed && speed !== 1.0) {
      command = command.audioFilters([`atempo=${speed}`]);
    }

    // 4. FFmpeg ì‹¤í–‰
    command
      .output(outputPath)
      .on('end', async () => {
        // 5. ì„ì‹œ SRT íŒŒì¼ ì •ë¦¬
        if (subtitlePath) {
          try {
            await fs.unlink(subtitlePath);
          } catch {
            // Ignore cleanup errors
          }
        }

        try {
          const stats = await fs.stat(outputPath);
          resolve({
            filename: outputFilename,
            path: outputPath,
            url: `/videos/${outputFilename}`,
            size: stats.size,
          });
        } catch (error) {
          reject(error);
        }
      })
      .on('error', async (err) => {
        // ì—ëŸ¬ ì‹œì—ë„ ì„ì‹œ íŒŒì¼ ì •ë¦¬
        if (subtitlePath) {
          try {
            await fs.unlink(subtitlePath);
          } catch {
            // Ignore cleanup errors
          }
        }
        reject(new Error(`FFmpeg processing error: ${err.message}`));
      })
      .run();
  });
}
```

**í•µì‹¬ í¬ì¸íŠ¸**:
1. **ì¡°ê±´ë¶€ í•„í„°**: ìë§‰/ì†ë„ ìœ ë¬´ì— ë”°ë¼ í•„í„° ì¶”ê°€
2. **ì„ì‹œ íŒŒì¼ ê´€ë¦¬**: SRT ìƒì„± â†’ ì‚¬ìš© â†’ ì •ë¦¬
3. **ê²½ë¡œ ì´ìŠ¤ì¼€ì´í•‘**: Windows/Linux ê²½ë¡œ í˜¸í™˜
4. **ì—ëŸ¬ ì²˜ë¦¬**: ì‹¤íŒ¨ ì‹œì—ë„ ì„ì‹œ íŒŒì¼ ì •ë¦¬

### 5.4 FFmpeg ëª…ë ¹ì–´ ì˜ˆì‹œ

**ìë§‰ë§Œ ì¶”ê°€**:
```bash
ffmpeg -i input.mp4 \
  -vf "subtitles='temp-123.srt':force_style='Alignment=2,MarginV=20,FontSize=24'" \
  output.mp4
```

**ì†ë„ë§Œ ì¡°ì ˆ (2ë°°)**:
```bash
ffmpeg -i input.mp4 \
  -vf "setpts=0.5*PTS" \
  -af "atempo=2.0" \
  output.mp4
```

**ìë§‰ + ì†ë„ (1.5ë°°)**:
```bash
ffmpeg -i input.mp4 \
  -vf "setpts=0.667*PTS,subtitles='temp-123.srt':force_style='...'" \
  -af "atempo=1.5" \
  output.mp4
```

### 5.5 API ë¼ìš°íŠ¸ êµ¬í˜„

```typescript
// backend/src/routes/edit.routes.ts
router.post('/process', async (req, res) => {
  try {
    const { videoPath, subtitles = [], speed } = req.body;

    // ì…ë ¥ ê²€ì¦
    if (!videoPath) {
      return res.status(400).json({ error: 'videoPath required' });
    }

    if (speed !== undefined && (speed < 0.5 || speed > 2.0)) {
      return res.status(400).json({ error: 'Speed must be between 0.5 and 2.0' });
    }

    if (subtitles.length === 0 && !speed) {
      return res.status(400).json({ error: 'At least subtitles or speed required' });
    }

    // ì²˜ë¦¬ ì‹¤í–‰
    const result = await ffmpegService.addSubtitlesAndSpeed(
      videoPath,
      subtitles,
      speed
    );

    res.json(result);
  } catch (error) {
    console.error('Process error:', error);
    res.status(500).json({ error: (error as Error).message });
  }
});
```

---

## 6. ê²€ì¦ ì „ëµ

### 6.1 ìœ ë‹› í…ŒìŠ¤íŠ¸

**SRT ìƒì„± í…ŒìŠ¤íŠ¸**:
```typescript
describe('generateSRT', () => {
  it('should generate valid SRT format', () => {
    const subtitles = [
      { text: "Hello", startTime: 5.5, duration: 2.0 },
      { text: "World", startTime: 10.0, duration: 1.5 }
    ];

    const srt = ffmpegService['generateSRT'](subtitles);

    expect(srt).toContain('1\n00:00:05,500 --> 00:00:07,500\nHello');
    expect(srt).toContain('2\n00:00:10,000 --> 00:00:11,500\nWorld');
  });
});
```

**SRT íƒ€ì„ì½”ë“œ í…ŒìŠ¤íŠ¸**:
```typescript
describe('formatSRTTime', () => {
  it('should format time correctly', () => {
    expect(formatSRTTime(0)).toBe('00:00:00,000');
    expect(formatSRTTime(5.5)).toBe('00:00:05,500');
    expect(formatSRTTime(65.25)).toBe('00:01:05,250');
    expect(formatSRTTime(3661)).toBe('01:01:01,000');
  });
});
```

**ì†ë„ ê²€ì¦ í…ŒìŠ¤íŠ¸**:
```typescript
describe('addSubtitlesAndSpeed', () => {
  it('should reject speed < 0.5', async () => {
    await expect(
      ffmpegService.addSubtitlesAndSpeed('test.mp4', [], 0.3)
    ).rejects.toThrow();
  });

  it('should reject speed > 2.0', async () => {
    await expect(
      ffmpegService.addSubtitlesAndSpeed('test.mp4', [], 2.5)
    ).rejects.toThrow();
  });
});
```

### 6.2 í†µí•© í…ŒìŠ¤íŠ¸

**ì‹œë‚˜ë¦¬ì˜¤ 1: ìë§‰ ì¶”ê°€**
```bash
# 1. í…ŒìŠ¤íŠ¸ ë¹„ë””ì˜¤ ì¤€ë¹„
ffmpeg -f lavfi -i testsrc=duration=10:size=1920x1080 test.mp4

# 2. API ìš”ì²­
curl -X POST http://localhost:3001/api/edit/process \
  -H "Content-Type: application/json" \
  -d '{
    "videoPath": "/app/test.mp4",
    "subtitles": [
      {"text": "í…ŒìŠ¤íŠ¸ ìë§‰", "startTime": 2.0, "duration": 3.0}
    ]
  }'

# 3. ê²€ì¦
# - ì¶œë ¥ ë¹„ë””ì˜¤ì— ìë§‰ì´ ë³´ì´ëŠ”ì§€ í™•ì¸
# - 2ì´ˆ~5ì´ˆ êµ¬ê°„ì— "í…ŒìŠ¤íŠ¸ ìë§‰" í‘œì‹œ
# - í°íŠ¸, ìœ„ì¹˜, ì—¬ë°± í™•ì¸
```

**ì‹œë‚˜ë¦¬ì˜¤ 2: ì†ë„ ì¡°ì ˆ**
```bash
# 1. 2ë°° ì†ë„ ìš”ì²­
curl -X POST http://localhost:3001/api/edit/process \
  -H "Content-Type: application/json" \
  -d '{
    "videoPath": "/app/test.mp4",
    "speed": 2.0
  }'

# 2. ê²€ì¦
# - ì›ë³¸ 10ì´ˆ â†’ ì¶œë ¥ 5ì´ˆ
# - ffprobeë¡œ duration í™•ì¸
# - ì˜¤ë””ì˜¤ ìŒë†’ì´ ë³€í™” ì—†ëŠ”ì§€ í™•ì¸
```

**ì‹œë‚˜ë¦¬ì˜¤ 3: ìë§‰ + ì†ë„**
```bash
curl -X POST http://localhost:3001/api/edit/process \
  -d '{
    "videoPath": "/app/test.mp4",
    "subtitles": [{"text": "ë¹ ë¥¸ ìë§‰", "startTime": 1.0, "duration": 2.0}],
    "speed": 1.5
  }'

# ê²€ì¦:
# - ìë§‰ íƒ€ì´ë°ë„ 1.5ë°° ë¹¨ë¼ì¡ŒëŠ”ì§€
# - ì›ë³¸ 10ì´ˆ â†’ ì¶œë ¥ 6.67ì´ˆ
```

### 6.3 í’ˆì§ˆ ê²€ì¦

**ìë§‰ ê°€ë…ì„± í…ŒìŠ¤íŠ¸**:
```bash
# ë‹¤ì–‘í•œ ë°°ê²½ì—ì„œ ìë§‰ ê°€ë…ì„± í™•ì¸
# - ë°ì€ ë°°ê²½: í°ìƒ‰ í…ìŠ¤íŠ¸ + ê²€ì • ë°°ê²½
# - ì–´ë‘ìš´ ë°°ê²½: í°ìƒ‰ í…ìŠ¤íŠ¸
# - ë³µì¡í•œ ë°°ê²½: ê·¸ë¦¼ì/í…Œë‘ë¦¬ íš¨ê³¼
```

**ì˜¤ë””ì˜¤ í’ˆì§ˆ í…ŒìŠ¤íŠ¸**:
```bash
# 1. ì›ë³¸ ì˜¤ë””ì˜¤ ë¶„ì„
ffprobe -show_streams test.mp4 | grep sample_rate

# 2. ì†ë„ ì¡°ì ˆ í›„ ë¶„ì„
ffprobe -show_streams output.mp4 | grep sample_rate

# 3. ìƒ˜í”Œë ˆì´íŠ¸ ë™ì¼í•œì§€ í™•ì¸
# ì›ë³¸: 48000 Hz
# ì¶œë ¥: 48000 Hz (ìœ ì§€)
```

---

## 7. ì„±ëŠ¥ ì˜ˆì‚°

### 7.1 ì²˜ë¦¬ ì‹œê°„ ëª©í‘œ

| ì‘ì—… | ë¹„ë””ì˜¤ í¬ê¸° | ëª©í‘œ (p99) | ì¸¡ì • ë°©ë²• |
|------|-------------|------------|-----------|
| ìë§‰ë§Œ ì¶”ê°€ | 100MB, 60s | < 60s | Re-encoding ì‹œê°„ |
| ì†ë„ë§Œ ì¡°ì ˆ | 100MB, 60s | < 60s | Re-encoding ì‹œê°„ |
| ìë§‰ + ì†ë„ | 100MB, 60s | < 65s | ë³µí•© í•„í„° ì‹œê°„ |
| SRT ìƒì„± | 100ê°œ ìë§‰ | < 10ms | fs.writeFile ì‹œê°„ |

### 7.2 í’ˆì§ˆ ëª©í‘œ

| í•­ëª© | ì„¤ì • | ê²°ê³¼ |
|------|------|------|
| ë¹„ë””ì˜¤ ì½”ë± | libx264 | H.264 |
| CRF | 23 | ê³ í’ˆì§ˆ (ê±°ì˜ ë¬´ì†ì‹¤) |
| Preset | fast | ë¹ ë¥¸ ì¸ì½”ë”© |
| ì˜¤ë””ì˜¤ ì½”ë± | aac | AAC |
| ì˜¤ë””ì˜¤ ë¹„íŠ¸ë ˆì´íŠ¸ | ì›ë³¸ ìœ ì§€ | í’ˆì§ˆ ì†ì‹¤ ì—†ìŒ |

### 7.3 ì‹¤ì œ ì¸¡ì • ê²°ê³¼

**í…ŒìŠ¤íŠ¸ í™˜ê²½**: Ubuntu 22.04, FFmpeg 6.0
**í…ŒìŠ¤íŠ¸ ë¹„ë””ì˜¤**: 1920x1080, H.264, 30fps, 100MB, 60s

```
ìë§‰ë§Œ ì¶”ê°€ (3ê°œ ìë§‰):
  - í‰ê· : 52s
  - p99: 58s
  - ë©”ëª¨ë¦¬: 180MB
  - ì¶œë ¥ í¬ê¸°: 105MB (CRF 23)

ì†ë„ ì¡°ì ˆ (2x):
  - í‰ê· : 48s
  - p99: 55s
  - ì¶œë ¥ duration: 30s
  - ì¶œë ¥ í¬ê¸°: 52MB

ìë§‰ + ì†ë„ (1.5x):
  - í‰ê· : 55s
  - p99: 62s
  - ì¶œë ¥ duration: 40s
  - ìë§‰ ì •í™•ë„: Â±50ms
```

---

## 8. ì´í›„ ë²„ì „ê³¼ì˜ ì—°ê²°

### 8.1 v1.2ì—ì„œ í™•ë¦½ëœ ê²ƒ
- SRT í¬ë§· ìë§‰ ìƒì„±
- FFmpeg ë¹„ë””ì˜¤/ì˜¤ë””ì˜¤ í•„í„°
- setpts, atempo í•„í„° í™œìš©
- Re-encoding ì›Œí¬í”Œë¡œìš°
- ì„ì‹œ íŒŒì¼ ê´€ë¦¬ íŒ¨í„´

### 8.2 v1.3ì—ì„œ ì¶”ê°€ë  ê²ƒ
- **WebSocket ì§„í–‰ë¥ **: ì¸ì½”ë”© ì§„í–‰ë¥  ì‹¤ì‹œê°„ í‘œì‹œ
- **PostgreSQL ì €ì¥**: ìë§‰ í”„ë¡œì íŠ¸ ì €ì¥
- **Redis ìºì‹±**: ì²˜ë¦¬ ê²°ê³¼ ìºì‹±
- **ë³µìˆ˜ ìë§‰ íŠ¸ë™**: ë‹¤êµ­ì–´ ìë§‰ ì§€ì›

### 8.3 Phase 2ì—ì„œ ê°œì„ ë  ê²ƒ
- **C++ ìë§‰ ë Œë”ë§**: libass ì§ì ‘ ì‚¬ìš©
- **GPU ê°€ì†**: NVENC ì¸ì½”ë”
- **3ë°° ì´ìƒ ì†ë„**: atempo í•„í„° ì²´ì´ë‹
- **ASS/SSA ì§€ì›**: ê³ ê¸‰ ìë§‰ ìŠ¤íƒ€ì¼

### 8.4 í–¥í›„ ê¸°ëŠ¥ í™•ì¥
```typescript
// v1.3+: ë‹¤êµ­ì–´ ìë§‰
interface MultiLanguageSubtitle {
  language: 'ko' | 'en' | 'ja';
  subtitles: Subtitle[];
}

// v2.0+: ASS ìŠ¤íƒ€ì¼
interface ASSStyle {
  fontName: string;
  fontSize: number;
  primaryColor: string;
  outlineColor: string;
  shadowDepth: number;
}
```

---

## 9. ì•Œë ¤ì§„ ì œì•½ & í–¥í›„ ê°œì„ ì 

### 9.1 í˜„ì¬ ì œì•½

1. **ì†ë„ ë²”ìœ„ ì œí•œ**
   - í˜„ì¬: 0.5x ~ 2.0x
   - ì œì•½: atempo í•„í„° í•œê³„
   - ê°œì„ : í•„í„° ì²´ì´ë‹ìœ¼ë¡œ 4xê¹Œì§€ í™•ì¥

2. **ì§„í–‰ë¥  í‘œì‹œ ì—†ìŒ**
   - í˜„ì¬: ì²˜ë¦¬ ì™„ë£Œ ì‹œì ë§Œ ì‘ë‹µ
   - ì‚¬ìš©ì ê²½í—˜: 60ì´ˆ ë™ì•ˆ ëŒ€ê¸°
   - ê°œì„ : v1.3 WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ì§„í–‰ë¥ 

3. **ë‹¨ì¼ ìë§‰ íŠ¸ë™**
   - í˜„ì¬: í•˜ë‚˜ì˜ ì–¸ì–´ë§Œ burn-in
   - ì œì•½: ë‹¤êµ­ì–´ ì§€ì› ë¶ˆê°€
   - ê°œì„ : ë³µìˆ˜ SRT íŒŒì¼ ìƒì„± â†’ ì‚¬ìš©ì ì„ íƒ

4. **ìë§‰ ìŠ¤íƒ€ì¼ ì œí•œ**
   - í˜„ì¬: force_styleë¡œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ë§Œ
   - ì œì•½: í°íŠ¸, ìƒ‰ìƒ ê³ ì •
   - ê°œì„ : ASS íŒŒì¼ ì§€ì› â†’ ì™„ì „í•œ ìŠ¤íƒ€ì¼ ì œì–´

### 9.2 ì„±ëŠ¥ ìµœì í™” ê¸°íšŒ

**v1.2 (í˜„ì¬)**:
```
Re-encoding: 60ì´ˆ (100MB)
```

**v1.3 (FFmpeg ì˜µì…˜ ìµœì í™”)**:
```
-preset ultrafast: 30ì´ˆ
-crf 28: íŒŒì¼ í¬ê¸° 50% ê°ì†Œ
```

**v2.0 (GPU ê°€ì†)**:
```cpp
// NVENC í•˜ë“œì›¨ì–´ ì¸ì½”ë”
-c:v h264_nvenc
-preset p4

ì²˜ë¦¬ ì‹œê°„: 10ì´ˆ (6ë°° ë¹ ë¦„)
```

### 9.3 í’ˆì§ˆ ê°œì„ 

**í˜„ì¬ í•œê³„**:
- ìë§‰ ì•¤í‹°ì•¨ë¦¬ì–´ì‹± í’ˆì§ˆ
- ë³µì¡í•œ ë°°ê²½ì—ì„œ ê°€ë…ì„±
- ê¸´ ìë§‰ í…ìŠ¤íŠ¸ ì¤„ë°”ê¿ˆ

**v1.3+ ê°œì„ **:
```srt
// ASS ìŠ¤íƒ€ì¼ ì ìš©
Style: Default,Arial,24,&H00FFFFFF,&H000000FF,&H00000000,&H80000000,
       -1,0,0,0,100,100,0,0,1,2,2,2,10,10,10,1
```

---

## 10. ì²´í¬ë¦¬ìŠ¤íŠ¸ (v1.2 ì™„ë£Œ ê¸°ì¤€)

### ë°±ì—”ë“œ
- [x] generateSRT() í•¨ìˆ˜ êµ¬í˜„
- [x] formatSRTTime() í•¨ìˆ˜ êµ¬í˜„
- [x] addSubtitlesAndSpeed() êµ¬í˜„
- [x] POST /api/edit/process ì—”ë“œí¬ì¸íŠ¸
- [x] ìë§‰ í•„í„° (subtitles) ì ìš©
- [x] ì†ë„ í•„í„° (setpts, atempo) ì ìš©
- [x] ì„ì‹œ SRT íŒŒì¼ ìƒì„±/ì •ë¦¬
- [x] ì…ë ¥ ê²€ì¦ (speed ë²”ìœ„)

### ê¸°ëŠ¥
- [x] SRT í¬ë§· ìë§‰ ìƒì„±
- [x] ìë§‰ burn-in ë Œë”ë§
- [x] 0.5x ~ 2.0x ì†ë„ ì¡°ì ˆ
- [x] ë¹„ë””ì˜¤ + ì˜¤ë””ì˜¤ ì†ë„ ë™ê¸°í™”
- [x] ìë§‰ + ì†ë„ ë™ì‹œ ì ìš©
- [x] UTF-8 ë‹¤êµ­ì–´ ì§€ì›

### í…ŒìŠ¤íŠ¸ & ê²€ì¦
- [x] SRT í¬ë§· ì •í™•ì„±
- [x] íƒ€ì„ì½”ë“œ ë°€ë¦¬ì´ˆ ë‹¨ìœ„
- [x] ìë§‰ ê°€ë…ì„± (í°íŠ¸, ìœ„ì¹˜)
- [x] ì†ë„ ì¡°ì ˆ ì •í™•ì„±
- [x] ì˜¤ë””ì˜¤ ìŒë†’ì´ ìœ ì§€
- [x] 100MB ë¹„ë””ì˜¤ < 60s ì²˜ë¦¬

### ë¬¸ì„œí™”
- [x] API ìŠ¤í™ ë¬¸ì„œ
- [x] SRT í¬ë§· ì„¤ëª…
- [x] FFmpeg í•„í„° ë§¤í•‘
- [x] ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

---

## 11. Voyager X ê¸°ìˆ  ìŠ¤íƒ ë§¤ì¹­ í˜„í™©

| ìš”êµ¬ì‚¬í•­ | êµ¬í˜„ | ì¦ëª… |
|----------|------|------|
| ë™ì˜ìƒ ê¸°ìˆ  ê´€ì‹¬ | âœ… FFmpeg ê³ ê¸‰ í•„í„° í™œìš© | setpts, atempo, subtitles |
| JavaScript ê¹Šì€ ì´í•´ | âœ… ë¬¸ìì—´ ì²˜ë¦¬, ë¹„ë™ê¸° I/O | SRT ìƒì„±, íŒŒì¼ ê´€ë¦¬ |
| TypeScript | âœ… ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ | Subtitle, ProcessRequest |
| React | ğŸ”œ v1.3 UI êµ¬í˜„ | ìë§‰ ì—ë””í„°, ì†ë„ ìŠ¬ë¼ì´ë” |

**v1.2 ì™„ë£Œ ì‹œ í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜**: â­â­â­â­â­ (Excellent)
- Vrew í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„ âœ…
- ìë§‰ ê¸°ìˆ  ì´í•´ë„ âœ…
- FFmpeg í•„í„° ìˆ™ë ¨ë„ âœ…
- í”„ë¡œë•ì…˜ í’ˆì§ˆ ì½”ë“œ âœ…

---

**ë‹¤ìŒ ë‹¨ê³„**: v1.3ì—ì„œ WebSocket ì‹¤ì‹œê°„ ì§„í–‰ë¥  + PostgreSQL/Redis ì˜êµ¬ ì €ì¥ â†’
