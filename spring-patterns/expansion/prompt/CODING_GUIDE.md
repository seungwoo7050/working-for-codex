# CODING & COMMENT GUIDE

이 문서는 **학습용 주석**을 포함한 전반적인 코딩/주석 스타일을 정의한다.  
사람과 코드 도구(에이전트) 모두 이 문서를 기준으로 작업한다.

---

## 1. 공통 원칙

1. **코드 동작은 절대 변경하지 않는다.**
   - 학습용 주석 작업 시:
     - 함수/메서드/클래스 시그니처 변경 금지
     - 로직, 제어 흐름, 상수 값 변경 금지
     - import/require/using 추가/삭제 금지
   - 허용되는 변경은:
     - 주석 추가/수정/삭제
     - 주석 포맷 정리 정도만.

2. **주석 언어**
   - 기본: **한국어**.
   - 기술 용어/식별자(클래스명, 함수명, 라이브러리명 등)는 원어(대부분 영어) 유지.
   - "한국어 설명 + 영어 식별자 그대로" 조합을 기본으로 한다.

3. **자동 생성/빌드 산출물은 절대 편집하지 않는다.**
   - 무조건 제외해야 할 예:
     - `node_modules/`, `dist/`, `build/`, `.next/`, `coverage/`, `vendor/`
     - 파일명에 `.generated.` 가 포함된 파일
     - 파일 상단에 `AUTO-GENERATED`, `DO NOT EDIT` 등 문구가 있는 경우
   - 에이전트는 주석 작업 전에 항상 이 조건을 먼저 체크해야 한다.

---

## 2. 학습용 주석의 목적

이 프로젝트의 학습용 주석은 다음을 목표로 한다.

1. **C 계열 언어 개발자도 이해할 수 있는 수준의 설명**
   - 새로운 스택/프레임워크의 문법·패턴을 처음 만나는 지점에서, "C 관점에서 어떻게 봐야 하는지"에 집중해서 설명한다.
2. **코드 읽는 순서 제시**
   - 파일 내부에서 "어디서부터 읽으면 되는지", "흐름이 어떻게 이어지는지"를 주석으로 정리한다.
3. **클론 가이드(CLONE-GUIDE.md)와의 연동**
   - 이 파일/함수가 클론 가이드의 어느 단계(패치)에 해당하는지 명시한다.
   - 나중에 클론 코딩할 때 "가이드 → 코드"를 쉽게 매칭하게 만드는 것이 목적이다.

---

## 3. 주석 레벨 구조

### 3.1 파일 단위 메타 주석

각 "수동 작성 코드 파일"의 맨 위에는 다음 정보를 포함한 주석 블록을 둔다.

예시(C 스타일 주석):

```c
// [FILE]
// - 목적: XXX를 처리하는 파일 (예: 로그인 요청 검증 + 토큰 발급)
// - 주요 역할: 요청/도메인/응답 흐름 중 어디에 해당하는지 설명
// - 관련 클론 가이드 단계: [CG-01.02], [CG-01.03]
// - 권장 읽는 순서: Order 1 → Order 2 → Order 3
````

* `관련 클론 가이드 단계` 표기 규칙:

  * CLONE-GUIDE.md에서 정의한 패치/단계에 ID를 부여하고(예: `CG-01.02`),
  * 해당 ID를 그대로 넣는다.
* `권장 읽는 순서`는 **이 파일 안에서 함수/클래스를 어떤 순서로 읽으면 되는지**를 일단 상위 수준에서만 나열한다.

### 3.2 함수/클래스 단위 순서 및 설명

각 주요 함수/클래스 앞에는 다음 패턴으로 단위 주석을 둔다.

```c
// [Order 1] XXX 초기화
// - 이 함수는 XXX를 책임진다.
// - 클론 가이드 단계: [CG-01.02]
// - 이 파일에서 먼저 읽어야 하는 이유: 예: 아래 로직들의 공통 설정을 담당
```

원칙:

1. **Order 번호는 "읽기 순서" 기준**으로 부여한다.
2. 가능한 한 "하나의 Order에 하나의 책임"만.
3. 클론 가이드 단계와 연결되면 `클론 가이드 단계` 줄을 넣고, 그렇지 않으면 생략해도 됨.

### 3.3 라인/블록 단위 학습용 주석

학습용이라도 모든 줄에 주석 다는 건 금지. 과도한 노이즈를 막기 위해:

1. **새로운 개념/문법/패턴이 처음 등장할 때만 상세하게 설명**

   * 예: 비동기 처리 패턴, DI 컨테이너, 미들웨어 체인, ORM 쿼리 빌더 등.
2. 이후 동일 패턴 반복 시에는:

   * 짧은 한 줄 요약 또는 주석 생략을 기본으로 한다.

표기 예:

```c
// [LEARN] 이 부분은 비동기 작업을 "콜백" 대신 "프라미스/async 함수"로 표현한 것.
//         C에서 블로킹 호출을 쓰던 감각과 비교해서 보면, 호출은 비슷하지만
//         실제 실행 순서는 이벤트 루프가 스케줄링한다.
```

`[LEARN]` 태그를 붙여서 "학습용 주석"과 일반 주석을 구분한다.
추후 일괄 필터링/제거가 필요할 때를 대비한 것이다.

### 3.4 파일 하단 "Reader Notes" 섹션

특정 스택/패턴을 **처음 마주하는 파일**에서는, 파일 맨 하단에 "Reader Notes"를 둔다.

```c
// [Reader Notes]
// - 이 파일에서 처음 등장한 개념: XXX, YYY
// - 이 스택(예: React, NestJS, gRPC)을 읽을 때 기준이 되는 관점
//   * C 함수 호출과 비교했을 때 구조적 차이
//   * 제어 흐름이 어디서 시작되고 어디서 끝나는지
// - 이 파일을 이해한 다음, 이어서 보면 좋은 파일: A, B, C
```

규칙:

1. 같은 스택에 대해 이미 다른 파일에 Reader Notes가 있다면,

   * 이 파일에서는 Reader Notes를 생략하거나,
   * "이전 파일의 Reader Notes 참고" 정도로 짧게만 적는다.
2. 에이전트는 가능하면 **같은 스택의 기존 Reader Notes가 있는지 먼저 검색**해서 중복 설명을 줄인다.

---

## 4. 스택별 주석 스타일 가이드

> 이 섹션은 프로젝트별로 채워 넣는다.
> (아래는 템플릿이므로 필요 없는 스택은 삭제하고, 실제 스택 이름으로 바꿔라.)

### 4.1 Backend (예: TypeScript / Node.js)

* 파일 상단:

  * 이 파일이 담당하는 레이어(Controller, Service, Repository 등) 명시.
  * 클론 가이드 단계 ID 연결.
* 함수 앞:

  * HTTP 핸들러, 도메인 서비스 단위로 [Order] 부여.
* Reader Notes:

  * 비동기 처리, DI, ORM 사용법을 C 개발자 관점에서 설명.

### 4.2 Frontend (예: React / Next.js)

* 파일 상단:

  * 페이지/컴포넌트 역할, 상태 관리 방식(State, Props, Store 등) 요약.
* 함수/컴포넌트:

  * 이벤트 핸들러/렌더링 로직의 실행 순서를 중심으로 [Order] 부여.
* Reader Notes:

  * 렌더링 사이클, 상태 변화 흐름, C에서 UI 코드 짜던 경험과의 차이 설명.

### 4.3 Infra / Config (예: YAML, Terraform 등)

* 파일 상단:

  * 이 설정이 "어떤 실행 환경"에 영향을 주는지(로컬, 스테이징, 프로덕션 등).
* Reader Notes:

  * 선언형 구성 방식과 C에서의 명령형 코드 차이 설명.

---

## 5. CLONE-GUIDE / design 과의 연동

1. **CLONE-GUIDE.md**

   * 각 패치/단계에 고유 ID 부여: `CG-01.01`, `CG-01.02`, …
   * 코드 파일/함수 주석에서는 이 ID만 사용해서 참조한다.
2. **design/ 디렉터리**

   * 설계 문서에서 "특정 파일/함수 이름 + CLONE-GUIDE ID"를 함께 언급.
   * 학습자는:

     1. CLONE-GUIDE에서 단계 개요를 읽고
     2. design 문서에서 구조를 보고
     3. 코드 파일 주석의 `관련 클론 가이드 단계`를 따라 실제 구현을 읽는다.

---

## 6. 에이전트용 특별 규칙

에이전트가 "학습용 주석 작성"을 할 때는 다음을 반드시 지킨다.

1. **입력으로 주어지는 디렉터리만 대상으로 삼는다.**

   * 사람이 지정한 "수동 작성 코드 디렉터리 목록" 외에는 손대지 않는다.
2. **주석 작업 순서**

   1. 프로젝트 루트의 `README`, `CLONE-GUIDE.md`, `design/`, `docs/CODING_GUIDE.md`를 읽고 규칙 파악
   2. 스택별로 "첫 진입 파일 후보"를 찾는다.
   3. 각 스택에 대해:

      * 첫 파일: 파일 상단 메타 주석 + 함수 [Order] + 학습용 주석 + Reader Notes
      * 이후 파일: 메타 주석 + 필요한 최소 학습용 주석만
   4. 작업 후:

      * 클론 가이드 ID, 파일 상단 [FILE], 함수 [Order] 번호가 일관적인지 자체 점검
3. **소스코드 수정 금지**

   * 주석 추가/수정만 허용.
   * 코드 포맷터를 돌려서 구조가 바뀌는 행위도 하지 않는다.