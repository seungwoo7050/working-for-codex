# 039_v2.2.0-metadata-analysis ìŠ¤ëƒ…ìƒ·

## ğŸ“‹ íŒ¨ì¹˜ ì •ë³´

| í•­ëª© | ê°’ |
|------|-----|
| íŒ¨ì¹˜ ë²”ìœ„ | 2.2.1 ~ 2.2.3 |
| ë²„ì „ íƒœê·¸ | v2.2.0 |
| ì´ë¦„ | Metadata Analysis |
| ì´ì „ ë‹¨ê³„ | v2.1.0 (Thumbnail Extraction) |

## ğŸ¯ ì´ ìŠ¤ëƒ…ìƒ·ì˜ ëª©í‘œ

FFmpeg C APIë¥¼ ì‚¬ìš©í•œ ì´ˆê³ ì† ë©”íƒ€ë°ì´í„° ë¶„ì„ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

### ì¶”ê°€ëœ ê¸°ëŠ¥
- **MetadataAnalyzer í´ë˜ìŠ¤**: C++ ë©”íƒ€ë°ì´í„° ë¶„ì„ê¸°
  - í¬ë§· ì •ë³´: ì»¨í…Œì´ë„ˆ, duration, ë¹„íŠ¸ë ˆì´íŠ¸
  - ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¼: ì½”ë±, í•´ìƒë„, FPS
  - ì˜¤ë””ì˜¤ ìŠ¤íŠ¸ë¦¼: ì½”ë±, ìƒ˜í”Œë ˆì´íŠ¸, ì±„ë„
- **N-API ë°”ì¸ë”©**: `getMetadata()` ë©”ì„œë“œ
- **metadata.ts ë¼ìš°íŠ¸**: `/api/metadata` ì—”ë“œí¬ì¸íŠ¸ + Redis ìºì‹±

## ğŸ“ í¬í•¨ë˜ì–´ì•¼ í•  íŒŒì¼

### v2.1.0ì—ì„œ ìƒì†
- ëª¨ë“  v2.1.0 íŒŒì¼ë“¤

### ì‹ ê·œ ì¶”ê°€ íŒŒì¼
```
native/
â”œâ”€â”€ include/
â”‚   â””â”€â”€ metadata_analyzer.h    # ë©”íƒ€ë°ì´í„° ë¶„ì„ê¸° í—¤ë”
â””â”€â”€ src/
    â””â”€â”€ metadata_analyzer.cpp  # ë©”íƒ€ë°ì´í„° ë¶„ì„ê¸° êµ¬í˜„

backend/src/routes/
â””â”€â”€ metadata.ts                # ë©”íƒ€ë°ì´í„° API (Redis ìºì‹±)
```

## ğŸš€ ë¹Œë“œ ë° ì‹¤í–‰

```bash
cd native && npm run build
cd ../backend && npm run dev

# API í…ŒìŠ¤íŠ¸
curl "http://localhost:3001/api/metadata?path=uploads/test.mp4"
```

## âœ… í…ŒìŠ¤íŠ¸

1. ë¹„ë””ì˜¤ ì—…ë¡œë“œ
2. `/api/metadata` í˜¸ì¶œ â†’ 10ms ì´ë‚´ ì‘ë‹µ
3. ì¬í˜¸ì¶œ â†’ Redis ìºì‹œ íˆíŠ¸ (< 5ms)

## ğŸ“ ì™„ë£Œ ê¸°ì¤€

- [x] ë©”íƒ€ë°ì´í„° ì¶”ì¶œ p99 < 10ms
- [x] ì½”ë±, í•´ìƒë„, duration ì •í™•íˆ ë°˜í™˜
- [x] Redis ìºì‹± ë™ì‘

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

â†’ `042_v2.3.0-performance-monitoring/`: ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
