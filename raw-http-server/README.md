# mini-spring – 웹 프레임워크를 처음부터 구현하기

> **상태**: ✅ Phase 1 완료 (v1.0.0 - v1.3.0)  
> **기간**: 6주  
> **완료일**: 2025-10-31

Spring Boot, Django 등 프레임워크가 내부적으로 어떻게 작동하는지 이해하기 위해 원시 소켓부터 직접 구현한 경량 웹 프레임워크입니다.

---

## 프로젝트 개요

### 왜 이 프로젝트인가?

대부분의 개발자는 프레임워크를 **사용**합니다. 하지만 프레임워크를 **직접 만들어본** 개발자는 드뭅니다.

이 프로젝트는 프로덕션 시스템(Phase 2: sagaline)을 구축하기 전에 웹 프레임워크의 기초를 이해하기 위한 학습 프로젝트입니다.

**면접 우위**: 프레임워크를 단순히 사용하는 것이 아니라, 실제로 어떻게 작동하는지 설명할 수 있습니다.

### 학습 목표

| 영역 | 학습 내용 |
|------|----------|
| **HTTP 프로토콜** | TCP 소켓을 통한 텍스트 기반 프로토콜의 본질 |
| **라우팅** | URL 매칭 및 핸들러 디스패치 메커니즘 |
| **미들웨어** | 요청/응답 파이프라인 패턴 |
| **의존성 주입** | 객체 생명주기 및 자동 와이어링 |
| **연결 풀링** | 리소스 관리 및 성능 최적화 |

---

## 기술 스택

| 구분 | 기술 |
|------|-----|
| **언어** | Python 3.11+ |
| **제약** | 프레임워크 없음, 원시 소켓만 사용 |
| **빌드** | pip |
| **테스트** | 수동 테스트 + 증거 문서화 |
| **플랫폼** | Linux/macOS/Windows |

---

## 구현 단계 (마일스톤)

| 버전 | 주제 | 기간 | 상태 |
|------|------|------|------|
| v1.0.0 | HTTP/1.1 서버 (원시 소켓) | 1주 | ✅ 완료 |
| v1.1.0 | 미니 프레임워크 (라우팅, 미들웨어, DI) | 2주 | ✅ 완료 |
| v1.2.0 | 스레드 안전 연결 풀링 | 2주 | ✅ 완료 |
| v1.3.0 | 통합 샘플 앱 | 1주 | ✅ 완료 |

### v1.0.0: HTTP 서버

**목표**: 라이브러리 없이 멀티스레드 HTTP/1.1 서버 구현

**구현 내용**:
- TCP 소켓 프로그래밍 (bind, listen, accept)
- HTTP 프로토콜 파싱 (요청 라인, 헤더, 바디)
- 스레드 풀을 통한 동시 연결 처리 (100+)
- 소켓 생명주기 관리

### v1.1.0: 미니 프레임워크

**목표**: 라우팅, 미들웨어, 의존성 주입을 갖춘 프레임워크 구현

**구현 내용**:
- 데코레이터 기반 라우팅 시스템
- 미들웨어 파이프라인 패턴
- 의존성 주입 컨테이너 (싱글톤, 요청 스코프)
- 요청/응답 객체 추상화
- 예외 처리

### v1.2.0: 연결 풀

**목표**: 처음부터 구현하는 스레드 안전 데이터베이스 연결 풀링

**구현 내용**:
- 큐 기반 연결 획득
- 연결 상태 확인
- 누수 탐지 (타임아웃 후 경고)
- 트랜잭션 격리 수준 탐구

### v1.3.0: 통합

**목표**: 완전한 mini-spring 프레임워크와 샘플 REST API 애플리케이션

---

## 아키텍처

```
HTTP 계층 (Milestone 1.1)
    ↓
프레임워크 코어 (Milestone 1.2)
    ↓
데이터 접근 (Milestone 1.3)
    ↓
통합 샘플 앱 (Milestone 1.4)
```

## 프로젝트 구조

```
raw-http-server/
├── src/
│   ├── milestone-1.1/     # HTTP Server (소켓)
│   ├── milestone-1.2/     # Mini-framework
│   ├── milestone-1.3/     # Connection pool
│   ├── milestone-1.4/     # Integration
│   └── milestone-1.4.5/   # Spring Bridge Spike
├── docs/
│   ├── learning-journal.md
│   └── evidence/          # 마일스톤별 검증 리포트
├── design/                # 설계 문서
└── README.md
```

---

## 빌드 및 실행

### 빠른 시작

```bash
# 빌드
./build.sh

# 서버 실행
./run_sample.sh
```

### API 테스트

```bash
# 헬스 체크
curl http://localhost:8080/health

# 사용자 목록 (인증 필요)
curl -H "Authorization: Bearer secrettoken" http://localhost:8080/api/users

# 사용자 조회
curl http://localhost:8080/api/users/{id}
```

### 검증 테스트

```bash
# 동시 부하 테스트
ab -n 1000 -c 100 http://localhost:8080/api/test
# 예상: 연결 오류 없음, requests/sec 측정

# HTTP 파싱 테스트
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{"name":"Alice"}'
```

---

## 구현된 기능

- [x] HTTP/1.1 서버 (원시 소켓)
- [x] 데코레이터를 사용한 라우팅
- [x] 미들웨어 파이프라인
- [x] 의존성 주입 컨테이너
- [x] 스레드 안전 연결 풀링
- [x] 트랜잭션 격리 수준 탐구 (문서화)
- [x] Spring Boot 매핑 브릿지

---

## 학습 포인트

### 핵심 개념

- **HTTP는 텍스트 프로토콜**: TCP 소켓을 통해 전송되는 텍스트 기반 프로토콜
- **프레임워크는 추상화**: 라우팅, 미들웨어 등 공통 패턴을 캡슐화
- **의존성 주입**: 객체 생명주기를 관리하고 모듈성을 촉진
- **연결 풀링**: 동시 부하에서 리소스 고갈 방지
- **격리 수준**: 성능과 일관성 사이의 트레이드오프

### 프레임워크 직접 구현의 가치

- 추상화 계층을 깊이 이해
- 성능 절충점을 명확히 파악
- 디버깅 능력 대폭 향상
- 아키텍처 설계 능력 발전

---

## 비교: mini-spring vs Spring Boot

| 기능 | mini-spring | Spring Boot |
|------|-------------|-------------|
| 코드 라인 | ~700 | ~100,000+ |
| 학습 곡선 | 낮음 (직접 구축) | 높음 (암시적 동작) |
| 기능 | 핵심 기능 집중 | 포괄적 생태계 |
| 프로덕션 준비 | 아니오 | 예 |

---

## 포트폴리오 가치

### 면접 주제

- "웹 프레임워크를 처음부터 구현했습니다."
- "의존성 주입의 내부 동작을 설명할 수 있습니다."
- "연결 풀링 및 누수 탐지 절충점을 이해합니다."
- "HTTP 프로토콜이 실제로 어떻게 동작하는지 알고 있습니다."

### 입증된 기술

| 분야 | 기술 |
|------|-----|
| **네트워크 프로그래밍** | 소켓, HTTP 파싱 |
| **동시성** | 스레드 풀, 동기화 |
| **디자인 패턴** | 미들웨어, 의존성 주입, 객체 풀링 |
| **리소스 관리** | 우아한 종료, 누수 탐지 |

---

## 설계 문서

상세한 설계 및 구현 내용은 `design/` 폴더를 참조하세요:

- **[Milestone 1.1](design/1.1-http-server.md)**: HTTP/1.1 서버 (원시 소켓)
- **[Milestone 1.2](design/1.2-mini-framework.md)**: 프레임워크 코어 (라우팅, 미들웨어, DI)
- **[Milestone 1.3](design/1.3-connection-pool.md)**: 스레드 안전 연결 풀링
- **[Milestone 1.4](design/1.4-integration.md)**: 통합 샘플 애플리케이션
- **[Milestone 1.4.5](design/1.4.5-spring-bridge.md)**: Spring Boot 통합 브릿지

**증거 리포트**: 모든 검증 리포트는 `docs/evidence/`에서 확인할 수 있습니다.

---

## 다음 단계

**Phase 2**: Spring Boot를 사용하여 프로덕션 전자상거래 플랫폼(sagaline) 구축

Phase 1을 완료한 후:
- 프레임워크의 내부 동작을 이해하게 됨
- Spring Boot/Django로 프로덕션 시스템을 구축할 준비 완료
- 자신감 있게 Phase 2 시작 가능

---

**"프레임워크의 마법을 이해하기 위해 직접 만들어본 프로젝트입니다."**
