# 프로젝트 초기화 설계 (v0.1.0)
> CMake/vcpkg 기반 프로젝트 구조 설정

## 1. 개요

### 1.1 목표

Checkpoint A 듀얼 게임 서버를 위한 프로젝트 기반 구조 설정:
- CMake 빌드 시스템 구성
- vcpkg 의존성 관리
- 표준 C++ 프로젝트 구조

### 1.2 패치 내용

| 패치 ID | 작업 | 핵심 파일 |
|---------|------|----------|
| 0.1.1 | CMakeLists.txt 설정 | `server/CMakeLists.txt` |
| 0.1.2 | vcpkg.json 의존성 정의 | `server/vcpkg.json` |
| 0.1.3 | 디렉토리 구조 생성 | `server/src/`, `server/include/` |
| 0.1.4 | 빌드 스크립트 작성 | `scripts/build.sh` |

---

## 2. CMake 구성 (0.1.1)

### 2.1 CMakeLists.txt 구조

```cmake
cmake_minimum_required(VERSION 3.20)

# vcpkg 툴체인 자동 감지
if(DEFINED ENV{VCPKG_ROOT})
    set(CMAKE_TOOLCHAIN_FILE "$ENV{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake")
endif()

project(pvpserver VERSION 1.0.0 LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# 패키지 검색 (vcpkg CONFIG 모드)
find_package(Boost REQUIRED COMPONENTS system)
find_package(libpq CONFIG)
find_package(Protobuf REQUIRED)
find_package(GTest CONFIG REQUIRED)
```

### 2.2 설계 결정

- **C++17**: 게임 서버 표준, 한국 업계 요구사항 매칭
- **CMake 3.20+**: 현대적 CMake 관용구 지원
- **vcpkg 통합**: 크로스 플랫폼 의존성 관리

---

## 3. 의존성 정의 (0.1.2)

### 3.1 vcpkg.json

```json
{
  "name": "cpp-pvp-server",
  "version": "1.0.0",
  "dependencies": [
    "boost-system",
    "boost-asio",
    "boost-beast",
    "gtest",
    "protobuf",
    "libpq"
  ]
}
```

### 3.2 의존성 역할

| 패키지 | 역할 | MVP |
|--------|------|-----|
| boost-system | 시스템 오류 처리 | 1.0 |
| boost-asio | 비동기 I/O | 1.0 |
| boost-beast | WebSocket/HTTP | 1.0 |
| gtest | 단위 테스트 | 1.0 |
| protobuf | 직렬화 (예정) | 2.0 |
| libpq | PostgreSQL 클라이언트 | 1.0 |

---

## 4. 디렉토리 구조 (0.1.3)

```
cpp-pvp-server/
├── server/
│   ├── CMakeLists.txt
│   ├── vcpkg.json
│   ├── src/
│   │   ├── CMakeLists.txt
│   │   ├── main.cpp
│   │   ├── core/           # 게임 루프, 설정
│   │   ├── game/           # 게임 로직
│   │   ├── network/        # 네트워크 레이어
│   │   ├── storage/        # 데이터 영속화
│   │   ├── matchmaking/    # 매치메이킹 (v1.2+)
│   │   ├── stats/          # 통계/랭킹 (v1.3+)
│   │   └── monitoring/     # 관측성
│   ├── include/
│   │   └── pvpserver/      # 공개 헤더
│   │       ├── core/
│   │       ├── game/
│   │       ├── network/
│   │       ├── storage/
│   │       ├── matchmaking/
│   │       └── stats/
│   └── tests/
│       ├── unit/
│       ├── integration/
│       └── performance/
├── design/                 # 설계 문서
├── docs/                   # 문서 및 증거
├── monitoring/             # Prometheus/Grafana
├── deployments/            # Docker/K8s
├── scripts/                # 빌드/유틸 스크립트
└── tools/                  # 테스트 클라이언트
```

---

## 5. 빌드 스크립트 (0.1.4)

### 5.1 scripts/build.sh

```bash
#!/bin/bash
set -e

cd "$(dirname "$0")/../server"
mkdir -p build
cd build

cmake .. -DCMAKE_TOOLCHAIN_FILE=$VCPKG_ROOT/scripts/buildsystems/vcpkg.cmake
cmake --build . --parallel $(nproc)

echo "Build complete!"
```

---

## 6. 완료 기준

- [x] CMake 빌드 성공
- [x] vcpkg 의존성 설치
- [x] main.cpp "Hello cpp-pvp-server" 출력
- [x] 디렉토리 구조 생성

---

## 7. v1.0.0과의 연결

**v0.1.0에서 확립된 것:**
- 프로젝트 빌드 시스템
- 의존성 관리 체계
- 표준 디렉토리 구조

**v1.0.0에서 추가될 것:**
- WebSocket 서버 (Boost.Beast)
- 60 TPS 게임 루프
- 플레이어 상태 관리
- PostgreSQL 연동
