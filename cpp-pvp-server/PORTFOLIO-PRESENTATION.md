# 🎮 C++ 실시간 PvP 게임 서버 포트폴리오

> **STAR 방식 발표 자료** - 게임 서버 개발자 포지션 지원용

---

## 📋 프로젝트 요약

| 항목 | 내용 |
|------|------|
| **프로젝트명** | cpp-pvp-server |
| **기간** | 약 8-10주 |
| **역할** | 전체 설계 및 구현 (1인 개발) |
| **기술 스택** | C++17, Boost.Asio/Beast, PostgreSQL, Redis, Protocol Buffers |
| **핵심 성과** | 60 TPS 실시간 1v1 전투 서버, UDP 넷코드, 분산 아키텍처, 안티치트 시스템 |

---

## 🌟 STAR 방식 상세 설명

---

### 📌 Situation (상황)

#### 배경
- 한국 게임 업계 서버 개발자 취업을 위한 실무 수준 포트폴리오 필요
- 단순 CRUD API가 아닌, **실시간 게임 서버의 복잡한 요구사항** 해결 능력 증명 필요
- 네트워크 지연, 동시성, 치트 방지 등 게임 서버 특유의 기술적 도전과제 존재

#### 도전 과제
1. **60 TPS 고정 틱레이트** 유지하며 2명 동시 전투 처리
2. **네트워크 지연** 환경에서 공정하고 반응성 있는 게임플레이 구현
3. **치트 행위 탐지/차단** 시스템으로 서버 권위 모델 강화
4. **수평 확장 가능한 분산 아키텍처** 설계

---

### 📌 Task (과업)

#### 목표 정의
프로덕션 품질의 **1v1 실시간 PvP 게임 서버**를 처음부터 설계 및 구현

#### 세부 목표
| 버전 | 목표 | 핵심 역량 |
|------|------|----------|
| v0.1.0 - v1.3.0 | 기본 게임 서버 | 비동기 네트워크, 게임 루프, 전투 시스템 |
| v1.4.0 - v1.4.2 | UDP 넷코드 | 클라이언트 예측, 지연 보상, 성능 최적화 |
| v2.0.0 - v2.1.0 | 분산 시스템 & 안티치트 | 수평 확장, 치트 탐지/차단 |

---

### 📌 Action (행동)

#### 1. 네트워크 레이어 설계 및 구현

**WebSocket 서버 (Boost.Beast)**
```
기술적 선택:
- Boost.Beast를 사용한 비동기 WebSocket 구현
- io_context 기반 이벤트 루프로 논블로킹 I/O
- 세션별 메시지 큐로 순서 보장

성과:
- 다중 클라이언트 동시 연결 관리
- 연결/해제 이벤트 안정적 처리
```

**UDP 게임 서버 (Boost.Asio)**
```
기술적 선택:
- TCP 대비 지연 감소를 위한 UDP 프로토콜 채택
- 스냅샷/델타 동기화로 대역폭 최적화
- 패킷 타입 시스템 (CONNECT, INPUT, STATE, EVENT)

성과:
- RTT, 지터, 패킷 손실률 메트릭 수집
- 네트워크 조건 시뮬레이션 기능
```

---

#### 2. 게임 로직 핵심 시스템

**60 TPS 게임 루프**
```cpp
// 고정 스텝 게임 루프 구현 (16.67ms per tick)
while (running) {
    auto start = steady_clock::now();
    
    ProcessInput();      // 입력 처리
    UpdatePhysics();     // 물리 업데이트
    CheckCollisions();   // 충돌 검출
    BroadcastState();    // 상태 동기화
    
    auto elapsed = steady_clock::now() - start;
    sleep_for(TICK_DURATION - elapsed);
}

성과:
- 일관된 16.67ms 틱 간격 유지
- 결정론적 물리 시뮬레이션
```

**전투 시스템**
```
구현 내용:
- 발사체: 30 m/s 직선 이동, 1.5초 수명
- 충돌 감지: 원-원 교차 (발사체 0.2m vs 플레이어 0.5m)
- 데미지: 히트당 20 HP, 풀 HP 100
- 전투 로그: 링 버퍼 32 이벤트 (사후 분석용)

성과:
- 정확한 충돌 판정
- 전투 이벤트 추적 가능
```

---

#### 3. 매치메이킹 & 통계 시스템

**ELO 기반 매치메이킹**
```
알고리즘:
- 초기 허용 범위: ±100 ELO
- 5초마다 ±25 확대 (대기 시간 감소)
- 결정론적 페어링 (가장 오래된 호환 플레이어 우선)

성과:
- 매칭 대기 시간 < 30초
- 비슷한 실력 매칭으로 균형 잡힌 게임
```

**통계 & 랭킹**
```
수집 데이터:
- 발사, 적중, 정확도, 데미지 가/피, 킬, 데스
- ELO 레이팅 (K-factor 25)
- 글로벌 리더보드 (레이팅 순 정렬)

API:
- GET /profile/{player_id} - 플레이어 프로필
- GET /leaderboard - TOP 100 랭킹
```

---

#### 4. UDP 넷코드 구현

**클라이언트 예측 & 리컨실리에이션**
```
클라이언트 예측:
- 입력 즉시 로컬 적용 → 부드러운 움직임
- 입력 히스토리 버퍼 유지

리컨실리에이션:
- 서버 상태 수신 시 불일치 감지
- 입력 히스토리 재적용으로 부드러운 보정

성과:
- 네트워크 지연에도 즉각적인 입력 반응
- 서버 권위 모델 유지하며 클라이언트 경험 개선
```

**지연 보상 (Lag Compensation)**
```
구현:
- 과거 월드 상태 버퍼 (64프레임, ~1초)
- 클라이언트 타임스탬프 기반 과거 상태 조회
- 해당 시점 기준 히트 판정

성과:
- 고지연 환경에서도 공정한 히트 판정
- 최대 200ms 되감기 지원
```

---

#### 5. 분산 아키텍처 설계

**세션 서버 분리 (Redis Cluster)**
```
설계:
- ISessionStore 인터페이스 정의
- InMemorySessionStore (개발/테스트용)
- RedisSessionStore (프로덕션용)

성과:
- 서버 무상태화로 수평 확장 가능
- 세션 TTL 관리, 자동 만료
```

**로드 밸런서 & 서비스 디스커버리**
```
ConsistentHashRing:
- MurmurHash3 해시 함수
- 150 가상 노드로 균일한 분배
- 노드 추가/제거 시 최소 재할당

ServiceDiscovery:
- Redis pub/sub 기반
- 하트비트로 헬스 체크
- 자동 페일오버
```

---

#### 6. 안티 치트 시스템

**서버 권위적 히트 검증**
```
HitValidator:
- 서버 측 레이캐스팅
- WorldStateBuffer에서 과거 상태 조회
- 클라이언트 주장 검증 후 거부/승인

성과:
- 에임봇 치트 무력화
- 부정 히트 로그 기록
```

**이동 속도 & 월핵 탐지**
```
MovementValidator:
- 스피드핵 탐지: 기본 속도 × 1.1 초과 시 위반
- 텔레포트 탐지: 1틱 내 비정상 이동 감지
- 월핵 탐지: 벽 통과 이동 감지

성과:
- 이동 치트 실시간 탐지/차단
- 위반 누적으로 자동 밴
```

**통계 이상 탐지**
```
AnomalyDetector:
- Z-Score 기반 이상치 분석
- 정확도, 헤드샷 비율, 반응 시간 분석
- 의심 레벨 누적 시스템

BanService:
- 플레이어/HWID/IP 밴
- 경고 → 임시 밴 → 영구 밴 단계
```

---

### 📌 Result (결과)

#### 정량적 성과

| 메트릭 | 목표 | 달성 |
|--------|------|------|
| 틱레이트 | 60 TPS | ✅ 60 TPS (16.67ms ± 1ms) |
| 테스트 통과율 | 100% | ✅ 100% (Unit + Integration + Performance) |
| 매치 결과 기록 | ≤5ms | ✅ <1ms |
| 동시 매치 | 10+ | ✅ 지원 |
| 지연 보상 | 200ms | ✅ 200ms 되감기 |

#### 기술 스택 완성도

```
✅ 완료된 시스템
├── 네트워크 레이어
│   ├── WebSocket 서버 (Boost.Beast)
│   ├── UDP 게임 서버 (Boost.Asio)
│   └── 스냅샷/델타 동기화
├── 게임 로직
│   ├── 60 TPS 게임 루프
│   ├── 전투 시스템 (발사체, 충돌, 데미지)
│   └── 매치메이킹 (ELO 기반)
├── 넷코드
│   ├── 클라이언트 예측
│   ├── 리컨실리에이션
│   └── 지연 보상
├── 분산 시스템
│   ├── Redis 세션 저장소
│   ├── Consistent Hashing
│   └── 서비스 디스커버리
└── 안티 치트
    ├── 히트 검증
    ├── 이동 검증
    ├── 이상 탐지
    └── 밴 시스템
```

#### 코드 품질

```
📊 코드 규모
├── 소스 파일: 30+ CPP 파일
├── 헤더 파일: 30+ H 파일
├── 테스트 파일: 30+ 테스트 케이스
└── 문서: 15+ 설계 문서

🧪 테스트 커버리지
├── Unit Tests: 핵심 로직 테스트
├── Integration Tests: 시스템 통합 테스트
└── Performance Tests: 성능 벤치마크
```

---

## 💡 기술적 하이라이트

### 1. 비동기 네트워크 프로그래밍
- Boost.Asio/Beast 활용한 논블로킹 I/O
- 이벤트 드리븐 아키텍처로 높은 동시성

### 2. 게임 서버 특화 기술
- 고정 틱레이트 게임 루프
- 결정론적 물리 시뮬레이션
- 실시간 상태 동기화

### 3. 넷코드 전문성
- 클라이언트 예측/리컨실리에이션
- 지연 보상 (Lag Compensation)
- UDP 기반 최적화

### 4. 분산 시스템 설계
- Consistent Hashing으로 균일한 부하 분산
- 서비스 디스커버리로 동적 스케일링

### 5. 보안 (안티 치트)
- 서버 권위 모델 강화
- 다층 치트 탐지 시스템

---

## 📚 학습 및 성장

### 기술적 성장
- C++ 메모리 관리, RAII 패턴 심화
- 비동기 프로그래밍 모델 이해
- 네트워크 프로토콜 설계 경험
- 분산 시스템 아키텍처 설계 경험

### 문제 해결 경험
- 동시성 버그 디버깅 (데이터 레이스, 데드락)
- 성능 최적화 (프로파일링, 병목 분석)
- 네트워크 지연 처리 전략 수립

---

## 🔗 GitHub 저장소

- **Repository**: [cpp-pvp-server](https://github.com/seungwoo7050/study-portpolio-overall)
- **Branch**: main
- **Documentation**: README.md, CLONE-GUIDE.md, design/ 폴더

---

## 📞 연락처

- **이메일**: [이메일 주소]
- **GitHub**: [GitHub 프로필]
- **LinkedIn**: [LinkedIn 프로필]

---

*이 문서는 STAR 방식(Situation, Task, Action, Result)으로 작성된 포트폴리오 발표 자료입니다.*
