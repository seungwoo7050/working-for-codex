# spring-patterns v2.4 성능 최적화

## 프로젝트 개요

### 선행 조건
- WebFlux, Virtual Threads, Rate Limiting, Caching 구현

### 현재 상태 (v2.3)
- Redis 캐싱
- Gzip 압축
- Rate Limiting

### 목표 상태 (v2.4)
- **성능 최적화 & 벤치마크**
- 연결 풀 최적화
- 10K req/s 달성

## 버전 로드맵 (v2.4 세부화)

| 버전 | 기간 | 설명 |
|------|------|------|
| v2.4.0 | 1주 | 성능 최적화 & 벤치마크 |

---

## v2.4.0: 성능 최적화 & 벤치마크

### 작업 내용
| 순서 | 작업 | 핵심 파일 |
|------|------|----------|
| 2.4.0.1 | R2DBC 연결 풀 최적화 | `application.yml` |
| 2.4.0.2 | Redis 연결 풀 최적화 | `RedisConfig.java` |
| 2.4.0.3 | 벤치마크 스크립트 | `scripts/benchmark.sh` |
| 2.4.0.4 | 성능 문서화 | `docs/PERFORMANCE.md` |

### 커밋 포인트
```bash
git commit -m "perf(config): optimize R2DBC connection pool settings"
git commit -m "perf(config): optimize Redis connection pool"
git commit -m "test(bench): add wrk benchmark scripts"
git commit -m "docs: add performance benchmark results"
git tag -a v2.4.0 -m "v2.4.0: Performance Optimization Complete"
```

## 결과

### 읽기 성능 (GET /api/v2/products)
| 동시 연결 | Req/s | 평균 지연 | P99 지연 |
|----------|-------|----------|---------|
| 100 | 8,500 | 11.7ms | 45ms |
| 200 | 10,200 | 19.6ms | 78ms |
| 400 | 10,800 | 37.0ms | 156ms |
| 800 | 10,500 | 76.1ms | 312ms |

### 쓰기 성능 (POST /api/v2/products)
| 동시 연결 | Req/s | 평균 지연 | P99 지연 |
|----------|-------|----------|---------|
| 100 | 4,200 | 23.8ms | 89ms |
| 200 | 5,100 | 39.2ms | 145ms |

### 캐시 히트율
- **상품 상세**: 94.2%
- **상품 목록**: 87.5%

### 리소스 사용률
- **CPU**: 평균 65%, 피크 82%
- **메모리**: 평균 4.2GB, 피크 5.8GB
- **DB 연결**: 평균 35/50, 피크 48/50

## 성능 목표 달성

| 메트릭 | 목표 | 달성 |
|--------|------|------|
| 읽기 처리량 | 10K req/s | ✅ 10.8K |
| 쓰기 처리량 | 5K req/s | ✅ 5.1K |
| P99 지연 (읽기) | < 200ms | ✅ 156ms |
| 캐시 히트율 | > 85% | ✅ 94.2% |